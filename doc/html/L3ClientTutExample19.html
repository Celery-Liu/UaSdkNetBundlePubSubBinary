<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>.NET Based OPC UA Client/Server/PubSub SDK: Data Monitored Items – Create Data Monitored Items</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header_inner_inner_bg2.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">.NET Based OPC UA Client/Server/PubSub SDK
   &#160;<span id="projectnumber">4.1.0.556</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('L3ClientTutExample19.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Data Monitored Items – Create Data Monitored Items </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#L4ClientTutExample19Pre">Prerequisites</a></li>
<li class="level1"><a href="#L4ClientTutExample19Desc">Description</a></li>
<li class="level1"><a href="#L4ClientTutExample19Code">Sample Code</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="L4ClientTutExample19Pre"></a>
Prerequisites</h1>
<p>A session and a subscription with the server must be established.</p>
<h1><a class="anchor" id="L4ClientTutExample19Desc"></a>
Description</h1>
<p>The following dialog shows an example dialog for creating data monitored items. Press the button “Show Code” to display the corresponding code, and the button “Help” to show this documentation page.</p>
<div class="image">
<img src="clienttutorials_create_data_monitored_items.png" alt="clienttutorials_create_data_monitored_items.png"/>
</div>
<p>Enter the desired values for “Sampling Interval” and “Queue Size” into the corresponding input fields at “Monitoring Parameters”. To set the Sampling Interval to the same value as the Publishing Interval, enter “-1”. Check the box near “Discard Oldest” to discard the oldest values when the queue overflows. At “Monitoring Mode”, you can choose between “Reporting”, “Sampling” and “Disabled”. Choose between “None”, “Absolute” and “Percent” at the drop-down menu “Deadband Type” and enter the corresponding value at “Deadband”.</p>
<p>Press the button “Select Node” to open a browse window for selecting the variables to monitor. After selection, the variables are listed at “Monitored Items to Create”. Press the button “Create” to actually start monitoring the attribute Value of the listed items. Check the box in front of “Use Asynchronous Pattern” to call “BeginCreate” instead of “Create”.</p>
<div class="image">
<img src="clienttutorials_create_data_monitored_items2.png" alt="clienttutorials_create_data_monitored_items2.png"/>
</div>
<p>An error will be displayed if the attribute variable doesn’t exist for a chosen node. Select a monitored item from the list to display the monitoring parameters set by the server in the grayed-out fields at “Monitoring Parameters”.</p>
<h1><a class="anchor" id="L4ClientTutExample19Code"></a>
Sample Code</h1>
<p>The following code starts monitoring the attribute “Value” of a specified node using the given monitoring parameters. The revised monitoring parameters and the status code are displayed in the dialog window.</p>
<ul>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html">UaClient.Session</a></li>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1MonitoredItem.html">UaClient.MonitoredItem</a></li>
<li><a class="el" href="structUnifiedAutomation_1_1UaBase_1_1StatusCode.html">UaBase.StatusCode</a></li>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1RequestSettings.html">UaClient.RequestSettings</a></li>
</ul>
<div class="fragment"><div class="line">                <span class="comment">// build list of items which have not been added yet.</span></div>
<div class="line">                List&lt;MonitoredItem&gt; monitoredItems = <span class="keyword">new</span> List&lt;MonitoredItem&gt;();</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">foreach</span> (ListViewItem item <span class="keywordflow">in</span> MonitoredItemsLV.Items)</div>
<div class="line">                {</div>
<div class="line">                    MonitoredItem monitoredItem = (MonitoredItem)item.Tag;</div>
<div class="line"></div>
<div class="line">                    if (monitoredItem.ClientHandle == 0)</div>
<div class="line">                    {</div>
<div class="line">                        monitoredItem.UserData = item;</div>
<div class="line">                        monitoredItems.Add(monitoredItem);</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="comment">// create monitored items.</span></div>
<div class="line">                List&lt;StatusCode&gt; results = m_subscription.CreateMonitoredItems(</div>
<div class="line">                    monitoredItems,</div>
<div class="line">                    <span class="keyword">new</span> RequestSettings() { OperationTimeout = 10000 });</div>
</div><!-- fragment --></div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="L1ClientTutorials.html">Tutorials for Client development</a></li><li class="navelem"><a class="el" href="L2ClientTutExamples.html">Getting Started</a></li>
    <li class="footer">&copy; Unified Automation GmbH - All rights reserved.</li>
  </ul>
</div>
</body>
</html>
