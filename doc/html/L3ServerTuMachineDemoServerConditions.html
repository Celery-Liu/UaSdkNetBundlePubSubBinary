<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>.NET Based OPC UA Client/Server/PubSub SDK: Alarming</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header_inner_inner_bg2.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">.NET Based OPC UA Client/Server/PubSub SDK
   &#160;<span id="projectnumber">4.1.0.556</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('L3ServerTuMachineDemoServerConditions.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Alarming </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#L4ServerTuMachineDemoServerConditionsDefault">Default behavior and configurations</a></li>
<li class="level1"><a href="#L4ServerTuMachineDemoServerConditionsLimitAlarm">Limit alarms</a></li>
<li class="level1"><a href="#L4ServerTuMachineDemoServerConditionsMethods">Client Method Calls</a></li>
</ul>
</div>
<div class="textblock"><p>The OPC UA alarm system is very flexible to cover many possible use case. The .NET SDK offers a consistent alarm handling that behaves reasonable with the default settings. Several design decision can be altered by setting the appropriate properties. But it is also possible to have a complete different implementation, if you do not use the state changing methods like <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1ConditionModel.html#a5f255b29af405089b4ca3cc99e15466d">Enable</a>, <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AcknowledgeableConditionModel.html#a645943c0f7251b074ce5b5ba94d24d23">Acknowledge</a>, <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#ad95e9b0c6b7463e7aebbd78fef59cb6c">Suppress</a>, etc. The following discussion will focus, however, in using the SDK provided system. Note, that conditional branches (<a class="el" href="classUnifiedAutomation_1_1UaServer_1_1ConditionModel.html#a6f828ec6c04bd7ca720af9eacc244cef">BranchId</a>) and <em>SupportsFilteredRetain</em> are not supported by the SDK neither way.</p>
<p>Using <em>BindModel</em> mechanism, the alarms should be part of the address space, so you get the alarm instances generated by the UaModeler. The alarms can be controlled by the already implemented SDK methods, e.g. <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1ConditionModel.html#a5f255b29af405089b4ca3cc99e15466d">Enable</a>, <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AcknowledgeableConditionModel.html#a645943c0f7251b074ce5b5ba94d24d23">Acknowledge</a>, <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#ad95e9b0c6b7463e7aebbd78fef59cb6c">Suppress</a>, etc. Those methods will not only change the state variables, e.g. <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1ConditionModel.html#a07676898a9c10131aa4fccc6c2fb1f53">EnabledState</a>, <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AcknowledgeableConditionModel.html#ae59856e69153faddf894a5ae93ef198c">AckedState</a>, and <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#a640e7d721526b91e4488f079235b0d8a">SuppressedState</a>, but will also manage the <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1ConditionModel.html#a32308cf9bc64690f4e8d5e7c6de306cf">Retain</a> property, alter other states if reasonable, and emit UA events if needed. Nearly all of those state variables are optional. So if you want to make a alarm confirmable you have to model the alarm instance in a way that it has a ConfirmedState child instance in the NodeSet. In this case, this was achieved with the UaModeler, but it can also be accomplished by manually creating the instances. The BindModel mechanism will take care that the AlarmConditionModel will have a <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AcknowledgeableConditionModel.html#a1daf8344d9a447eb88e817c74686ad9b">ConfirmedState</a> instance assigned. Once the ConfirmedState instance is present methods like <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AcknowledgeableConditionModel.html#ae4ae29148afa0de5118319406ba7a4c6">Confirm</a> will work, and the state will also be considered when calculating the <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1ConditionModel.html#a32308cf9bc64690f4e8d5e7c6de306cf">Retain</a> property.</p>
<h1><a class="anchor" id="L4ServerTuMachineDemoServerConditionsDefault"></a>
Default behavior and configurations</h1>
<p>In this section the default behavior of the SDK alarm model implementation will be explained. All methods mentioned here are supposed to be called by code. The client interactions are covered in a later <a class="el" href="L3ServerTuMachineDemoServerConditions.html#L4ServerTuMachineDemoServerConditionsMethods">section</a>.</p>
<p>The <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1ConditionModel.html#a07676898a9c10131aa4fccc6c2fb1f53">EnabledState</a> will only be altered by the <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1ConditionModel.html#a5f255b29af405089b4ca3cc99e15466d">Enable</a> and <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1ConditionModel.html#ad47b926a2a62413ec2ef22203d536126">Disable</a> and methods. If the alarm is disabled the <em>Retain</em> property will be false, even if the alarm is still unacknowledged.</p>
<p>The <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#a7d8b834c1bef57ffa5e12e76ab8cf74f">ActiveState</a> will be altered by calling the <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#a29bbd9ed221ddb3650ac76c1162c118e">Activate</a> and <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#a9b95db944cdbf0e4bbf68f204f8bb3af">Inactivate</a> methods directly or indirectly by the <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1LimitAlarmModel.html#a80988da468aa3f7effa5b131aac08e23">LimitAlarmModel.Evaluate</a> method. If the alarm is active the <em>Retain</em> property will be true as well.</p>
<p>The <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AcknowledgeableConditionModel.html#ae59856e69153faddf894a5ae93ef198c">AckedState</a> will be altered by calling the <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AcknowledgeableConditionModel.html#a645943c0f7251b074ce5b5ba94d24d23">Acknowledge</a> and <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AcknowledgeableConditionModel.html#a2f1f1ffde6c51a44da157e062f26cd41">ResetAcked</a> methods. If the alarm is not acknowledged the, <em>Retain</em> property will be true. The <em>ResetAcked</em> method will be called on <em>Activate</em>.</p>
<p>The optional <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AcknowledgeableConditionModel.html#a1daf8344d9a447eb88e817c74686ad9b">ConfirmedState</a> will be altered by calling the <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AcknowledgeableConditionModel.html#ae4ae29148afa0de5118319406ba7a4c6">Confirm</a> and <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AcknowledgeableConditionModel.html#a74a4a930e4135bd0bcfa0b83252bc501">ResetConfirmed</a> methods. If the alarm is not confirmed, the <em>Retain</em> property will be true. The <em>ResetConfirmed</em> method will be called on <em>ResetAcked</em>. Hence, after activation the alarm will be unacknowledged and unconfirmed. The natural order is that an alarm is first acknowledge and than confirmed, but the SDK does not enforce this. It is up to the server implementation to restrict the order.</p>
<p>The optional <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#ab101bcd0c8400899ea919a4cb323a11c">OutOfServiceState</a> will be altered by calling the <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#a7e43fdf6c3f313e6b5d0cba136f1c476">RemoveFromService</a> and <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#a1e59753e112c534fd2917d9e50901346">PlaceInService</a> methods.</p>
<p>The optional <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#a640e7d721526b91e4488f079235b0d8a">SuppressedState</a> will be altered by calling the <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#ad95e9b0c6b7463e7aebbd78fef59cb6c">Suppress</a> and <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#a7bcc4247eefe95f16a719addce5ad21f">Unsuppress</a> methods.</p>
<p>The optional <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#afd3a41e3b3dbf905a9c13dbe1d7a7eda">ShelvingState</a> will be altered by calling the <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#a24591719d21c8ca89a91d4cc474311f6">OneShotShelve</a>, <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#a7864c37e1308198d22ddcaa1e776b263">TimedShelve</a>, and <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#a3e287c87b0b89457ca4a20f02a2175a4">Unshelve</a> methods. If the ShelvingState state machine is in the <em>OneShotShelve</em> state on alarm inactivation, the state machine will be set back to <em>Unshelved</em>. Note, The <em>TimedShelve</em> method will correctly transition to the <em>TimedShelved</em> state but it will not automatically switch back. So it is up to the application to setup a timer and call the <em>Unshelve</em> method.</p>
<p>If at least one of the states <em>OutOfServiceState</em>, <em>SuppressedState</em> or <em>ShelvingState</em> is active, the property <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#aa412ba08f748e92bfcf2bd2d49d22e18">SuppressedOrShelved</a> will be set to <em>true</em>, otherwise to <em>false</em>. The states have no influence on the <em>Retain</em> property. It is up to the client, if it wants to show/filter those alarms or not.</p>
<p>The optional <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#abab0250df5d5d6d2388915d2bff38877">LatchedState</a> will be reset by calling the <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#a3673c6e3d61b88b885545f8cd3d7f21d">Reset</a> methods. If present it will be set to true on activation. As long as the alarm is in the LatchedState, the <em>Retain</em> property will be true.</p>
<p>The OPC UA specification defines the AckedState as mandatory. But there are cases where an explicit acknowledgment handling is not wanted. An example are warnings that are only interesting for the client as long as they are active. The SDK offers several ways to handle that. The most simple variant is the <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AcknowledgeableConditionModel.html#a5a748eac7a13d8b55c45343746342262">IsAckedStateIgnored</a> property, which makes the SDK to ignore the <em>AckedState</em> in the <em>Retain</em> calculation. The <em>AckedState</em> stays in whatever state it is. This might confuse some clients. Another option is to set the <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AlarmConditionModel.html#a63367ed3bc99893216c9e8907b3baa88">AutoAcknowledgeMode</a> property to <em>OnActivate</em>, than the <em>AckedState</em> will be set to acknowledged directly on activation or to <em>OnInactivate</em> than the alarm is unacknowledged as long as the alarm is active, but will be automatically acknowledged on inactivation.</p>
<p>It is not strictly defined in the specification when to reset the <em>ConfirmedState</em>. As stated above, the default behavior is to reset it together with the <em>AckedState</em>. This can be changed with the <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1AcknowledgeableConditionModel.html#a97ecf02b28c952ca4dd8cc8d7763ddd8">ConfirmedStateResetMode</a> property.</p>
<h1><a class="anchor" id="L4ServerTuMachineDemoServerConditionsLimitAlarm"></a>
Limit alarms</h1>
<p>In the MachineDemoServer, an ExclusiveLevelAlarm is used. The SDK provides the method <a class="el" href="classUnifiedAutomation_1_1UaServer_1_1ExclusiveLimitAlarmModel.html#a3852caa8306100fdfa8081b51563c8f5">Evaluate</a> which takes the current level and sets the alarm's <em>ActiveState</em> depending on the previously set Limits. If present it will respect the configured level depended Severities and Deadbands.</p>
<div class="fragment"><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> CheckTemperatureCondition()</div>
<div class="line">        {</div>
<div class="line">            TemperatureCondition.Evaluate(Temperature.Value);</div>
<div class="line">        }</div>
</div><!-- fragment --><p> The limits have been set before, when a glass pane is actually present:</p>
<div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keywordtype">void</span> SetTemperatureAlarmLimits(<span class="keywordtype">double</span> min, <span class="keywordtype">double</span> max)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">using</span> (TemperatureCondition.MergeTransitions())</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span> (!TemperatureCondition.EnabledState.Id)</div>
<div class="line">                {</div>
<div class="line">                    TemperatureCondition.Enable();</div>
<div class="line">                }</div>
<div class="line">                TemperatureCondition.LowLimit = min;</div>
<div class="line">                TemperatureCondition.HighLimit = max;</div>
<div class="line">                CheckTemperatureCondition();</div>
<div class="line">            }</div>
<div class="line">        }</div>
</div><!-- fragment --><p> If the condition is still disabled, it will first be enabled. Than the limits will be set and eventually the current temperature is checked against the new values. Since <em>Enable</em> and the <em>Evaluate</em> method can cause a transition generation, where only one is desired, both calls are surrounded by a <em>MergeTransitions</em> scope. This will merge all alarm transitions until its end.</p>
<h1><a class="anchor" id="L4ServerTuMachineDemoServerConditionsMethods"></a>
Client Method Calls</h1>
<p>There are several methods defined by the specification which a client could possibly call to acknowledge, confirm, silent, etc. an alarm. The possible implementation strongly depends on the alarm system, so the alarm model does not implement the <a class="el" href="interfaceUnifiedAutomation_1_1UaServer_1_1IConditionMethods.html">IConditionMethods</a>, <a class="el" href="interfaceUnifiedAutomation_1_1UaServer_1_1IAcknowledgeableConditionMethods.html">IAcknowledgeableConditionMethods</a>, and <a class="el" href="interfaceUnifiedAutomation_1_1UaServer_1_1IAlarmConditionMethods.html">IAlarmConditionMethods</a> interfaces. But the BindModel mechanism will set the <em>ConditionMethods</em> property to the node manager. So it is enough to override the virtual methods of the node manager. Here, in the <code>MachineDemoServer/MachineDemoServerNodeManager.Alarms.cs</code> file.</p>
<div class="fragment"><div class="line">    <span class="keyword">internal</span> <span class="keyword">partial class </span>MachineDemoServerNodeManager : BaseNodeManager</div>
</div><!-- fragment --><p> In the example, the user is not allowed to manually <em>Enable</em> or <em>Disable</em> alarms. This should only happen by code. So the status code <em>BadUserAccessDenied</em> will be returned.</p>
<div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a72381d4605940627a6e846d5f3155c51">StatusCode</a> Enable(RequestContext context, ConditionModel model)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> StatusCodes.BadUserAccessDenied;</div>
<div class="line">        }</div>
</div><!-- fragment --><p> In most cases the call can be simply forwarded to the actual alarm implementation. The alarm methods intentionally return <a class="el" href="structUnifiedAutomation_1_1UaBase_1_1StatusCode.html">StatusCode</a>s instead of throwing exceptions.</p>
<div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a72381d4605940627a6e846d5f3155c51">StatusCode</a> Acknowledge(RequestContext context, AcknowledgeableConditionModel model, byte[] eventId, LocalizedText comment)</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine($<span class="stringliteral">&quot;[{Thread.CurrentThread.ManagedThreadId}] Acknowledge&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> model.Acknowledge(eventId, comment, context.UserIdentity.UserName);</div>
<div class="line">        }</div>
</div><!-- fragment --><p> Most methods in the OPC UA specification have also a second method variant which takes an additional comment as argument. There are not always direct counterparts on the alarm class for those methods. But they can easily be composed by the simple methods, here <em>Suppress</em>, and the <em>AddComment</em> method. Again, the calls are enveloped in a <em>MergeTransitions</em> scope, so that only one transition is generated. Without the <code>using (model.MergeTransitions())</code> block, two events would be reported to the clients.</p>
<div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a72381d4605940627a6e846d5f3155c51">StatusCode</a> Suppress(RequestContext context, AlarmConditionModel model)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> model.Suppress();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a72381d4605940627a6e846d5f3155c51">StatusCode</a> Suppress2(RequestContext context, AlarmConditionModel model, LocalizedText Comment)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">using</span> (model.MergeTransitions())</div>
<div class="line">            {</div>
<div class="line">                var status = model.Suppress();</div>
<div class="line">                <span class="keywordflow">if</span> (status.IsGood() &amp;&amp; !<a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a26889eee67d7ccc649f6188d0c20ad2b">LocalizedText</a>.IsNullOrEmpty(Comment))</div>
<div class="line">                {</div>
<div class="line">                    model.AddComment(model.EventId, Comment, context.UserIdentity.UserName);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">return</span> status;</div>
<div class="line">            }</div>
<div class="line">        }</div>
</div><!-- fragment --><p> The UA methods for the <em>ShelvingState</em> are not defined on the containing alarm, but on the <em>ShelvedStateMachineType</em>. Therefore, every <em>ShelvedStateMachineModel</em> instance carries a reference to its parent alarm. Note, this will be set when calling <em>BindModel</em>. If you are using some other mechanism, like <em>LinkModelToNode</em> you have to set it on your own.</p>
<div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a72381d4605940627a6e846d5f3155c51">StatusCode</a> OneShotShelve(RequestContext context, ShelvedStateMachineModel model)</div>
<div class="line">        {</div>
<div class="line">            var alarm = model.ParentAlarm;</div>
<div class="line">            <span class="keywordflow">if</span> (alarm != null)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">return</span> alarm.OneShotShelve();</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">return</span> StatusCodes.BadNotSupported;</div>
<div class="line">        }</div>
</div><!-- fragment --></div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="L1ServerTutorials.html">Tutorials for Server development</a></li><li class="navelem"><a class="el" href="L2ServerTutMachineDemoServer.html">Machine Demo Server</a></li>
    <li class="footer">&copy; Unified Automation GmbH - All rights reserved.</li>
  </ul>
</div>
</body>
</html>
