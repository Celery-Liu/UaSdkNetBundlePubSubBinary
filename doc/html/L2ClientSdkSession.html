<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>.NET Based OPC UA Client/Server/PubSub SDK: Session</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header_inner_inner_bg2.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">.NET Based OPC UA Client/Server/PubSub SDK
   &#160;<span id="projectnumber">4.1.0.556</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('L2ClientSdkSession.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Session </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#L3ClientSdkSessionOverview">Overview</a></li>
<li class="level1"><a href="#L3ClientSdkSessionSyncVsAsync">Synchronous vs. Asynchronous Design Pattern vs. Task Asynchronous Programming Model (TAP)</a></li>
<li class="level1"><a href="#L3ClientSdkSessionConnectionModel">Connection Model</a></li>
</ul>
</div>
<div class="textblock"><p>API documentation <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html" title="A class that manages a session with an OPC UA server. ">UnifiedAutomation.UaClient.Session</a> </p>
<h1><a class="anchor" id="L3ClientSdkSessionOverview"></a>
Overview</h1>
<p>The <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html">Session</a> class represents a connection between the Client application and a single server. A process can create many <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html">Session</a> objects connected to different Servers. The <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html">Session</a> object is responsible for monitoring the connection with the Server and attempting to reconnect if there are any errors. The application can receive notifications of changes to the connection status with the <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#aa72f256af46a5c581b709e6c6571c11e">ConnectionStatusUpdate</a> event.</p>
<p>A <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html">Session</a> object is thread-safe.</p>
<h1><a class="anchor" id="L3ClientSdkSessionSyncVsAsync"></a>
Synchronous vs. Asynchronous Design Pattern vs. Task Asynchronous Programming Model (TAP)</h1>
<p>The application can communicate with the Server using one of the several methods defined in the <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html">Session</a> object (described in more detail below). Each of these methods has a synchronous, an asynchronous and a TAP based version. The design pattern is illustrated below:</p>
<div class="fragment"><div class="line">List&lt;RESULT&gt; SERVICE(</div>
<div class="line">    IList&lt;REQUEST&gt; requests,</div>
<div class="line">    RequestSettings settings);</div>
<div class="line">IAsyncResult BeginSERVICE(</div>
<div class="line">    IList&lt;REQUEST&gt; requests,</div>
<div class="line">    RequestSettings settings,</div>
<div class="line">    AsyncCallback callback,</div>
<div class="line">    <span class="keywordtype">object</span> userData);</div>
<div class="line">List&lt;RESULT&gt; EndSERVICE(IAsyncResult result);</div>
<div class="line">Task&lt;List&lt;Result&gt;&gt; SERVICEAsync(</div>
<div class="line">    IList&lt;REQUEST&gt; requests,</div>
<div class="line">    RequestSettings settings);</div>
</div><!-- fragment --><p>Where</p>
<ul>
<li>SERVICE is the name of the service;</li>
<li>REQUEST is a class that stores an operation to perform;</li>
<li>RESULT is a class that stores the results of an operation.</li>
</ul>
<p>The <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1RequestSettings.html">RequestSettings</a> class allows the application to specify common parameters such as the RequestTimeout or the <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1RequestSettings.html#a38c901491933136d4e77d5f1484490f4">DiagnosticMasks</a>. IAsyncResult and AsyncCallback parameters are defined as part of the standard .NET asynchronous method call design pattern.</p>
<p>The services supported by the <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html">Session</a> object are shown in the following table:</p>
<table class="doxtable">
<tr>
<th>Service Name </th><th>Description  </th></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a729687d1bdacbe9a16b895f725de040b">Connect</a> </td><td>Connects to the Server and creates a new Session. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#aa2c47443cfd7d1e9d4e4adfe90bd3787">ReverseConnect</a> </td><td>Connects to the Server via a channel initiated by the server.<br />
 This is needed, when the server is behind a firewall and no port can be opened. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a0b5d9d0e24aa5f0faf5e444c2b5aceb5">Disconnect</a> </td><td>Closes an existing Session and disconnects from the Server. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a86993e1b70be25711da369baf323a06d">ChangeUser</a> </td><td>Changes the user identity associated with the Session. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a0e9e131bd5ac7158dc6d343e083b8ee0">Read</a> </td><td>Reads the value of one or more attributes. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#adb89d82e7341e8d71dd02bd035ac6941">Write</a> </td><td>Writes the value of one or more attributes. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a21976ce2790063c5a39a3842ee3d391f">Call</a> </td><td>Calls a single method. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#ada115ff5361836d96a54503b696b1107">CallList</a> </td><td>Calls multiple methods. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#aa3c1f3d27a86927a3c9349c16989eda1">Browse</a> </td><td>Returns the references from a single node. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a0e2591e37a9571e2c8ea8c671833ba4d">BrowseNext</a> </td><td>Fetches the next batch of references from a single node. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a36525fd07d55b00d341a5a437c15ef02">BrowseList</a> </td><td>Returns all references for multiple nodes.<br />
 This service automatically processes any continuation points returned from the Server so there is no need to call BrowseNext. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#abdaec046fd5012ea7028b035a061bfc5">ReleaseBrowseContinuationPoint</a> </td><td>Releases a continuation point returned in a Browse or BrowseNext response. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#aebd565a004b05049a4d86cde0aa59d96">TranslateBrowsePath</a> </td><td>Finds the node at the end of one or more browse paths. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a833a5a22ea62d85d12c389ead7b04cb2">RegisterNodes</a> </td><td>Register nodes to create shortcuts in the server. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a10df5b614d627dd292593e9ea02266b8">UnregisterNodes</a> </td><td>Unregister nodes to delete shortcuts in the server. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#ac509a1894afc8044f7c9935525ae8e0a">TransferSubscriptions</a> </td><td>Transfers the Subscriptions to the Session. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a6418ff968d022825449895d9439ac107">HistoryReadRaw</a> </td><td>Reads the raw historical data for one or more variables. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a083f01b606a27ed5118ef98644584384">HistoryReadEvent</a> </td><td>Reads the event history for one or more event notifier objects. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#ab3ee375b241281d224e210b3a6922256">HistoryReadProcessed</a> </td><td>Reads processed historical data for one or more variables. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#ad252bcbb36bd6718bb35dfd9eed544e9">HistoryReadAtTime</a> </td><td>Reads historical values at specific times one or more variables. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a072918adbf871408ca815f482535b8ba">HistoryReadModified</a> </td><td>Reads the modified data for one or more variables. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a1533d3a7ed9541f4149997de4d9d7414">ReleaseHistoryContinationPoints</a> </td><td>Releases a list of continuation points returned from one of the HistoryRead calls. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#ad82aaa392319a526d2ae065479a78f7e">HistoryDeleteAtTime</a> </td><td>Deletes historical values at specific times one or more variables. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#abf948e23d49ca9c658e0044bd123096d">HistoryDeleteEvent</a> </td><td>Deletes the event history for a list of event notifier objects. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#aaf216c58d36c62dec377d843f5cefade">HistoryDeleteRaw</a> </td><td>Deletes the history for a list of variables in the passed time domain. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#add413b90673e62de9bf0f30b47e10be5">HistoryUpdateData</a> </td><td>Updates the history for a list of variables. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#afd53b44ef2769a653b786a6877b7b543">HistoryUpdateEvent</a> </td><td>Updates the event history for a list of event notifier objects. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a5dfa6b4d2a94ec3d73cf261a71113b03">Query</a> </td><td>Query against the server's address space.<br />
 Not implemented by most servers. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#ad05e22743495b11f07a37e8adc8032d0">AddNodes</a> </td><td>Adds nodes to the server's address space.<br />
 This NodeManagement service is not implemented by most servers. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a738b6595b88c497db813d80a1b613742">AddReferences</a> </td><td>Adds references to the server's address space.<br />
 This NodeManagement service is not implemented by most servers. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#abf10d76ccae04ec2c0a4889bde3aa38e">DeleteNodes</a> </td><td>Deletes nodes from the server's address space.<br />
 This NodeManagement service is not implemented by most servers. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#acb41d841e97cc05a431a28787e9f0c85">DeleteReferences</a> </td><td>Deletes references from the server's address space.<br />
 This NodeManagement service is not implemented by most servers. </td></tr>
</table>
<h1><a class="anchor" id="L3ClientSdkSessionConnectionModel"></a>
Connection Model</h1>
<p>The <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a729687d1bdacbe9a16b895f725de040b">Connect</a> service establishes and maintains a Session with a Server. The process involved is shown in the following figure:</p>
<div class="image">
<img src="l3clientsdksessionconnectionmodel.png" alt="l3clientsdksessionconnectionmodel.png"/>
</div>
<p>The BeginConnect action is started when the application initiates it and when an error occurs at any stage (assuming the <a class="el" href="classUnifiedAutomation_1_1UaSchema_1_1ClientSettings.html#ae376e314759d82a23b9e2d964135e0d0">RetryInitialConnect</a> or <a class="el" href="classUnifiedAutomation_1_1UaSchema_1_1ClientSettings.html#ac0d6304fde14145d49ee14922bb93064">AutomaticReconnect</a> property is TRUE). </p>
<p>The GetEndpoints action is started to get a complete <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1EndpointDescription.html">EndpointDescription</a> for the Server if only the Endpoint url is passed to the Connect method. It fetches the available endpoints from the Server using its discovery endpoint. It then picks the best endpoint based on the security selection provided in the BeginConnect action. If the property <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a87ab7201de6af976e9f1411de820a1ab">UseDnsNameAndPortFromDiscoveryUrl</a> is set to true, the DNS name and port from the Endpoint Url will be used to connect to the server. You can also have influence on the Endpoint url by adding an <a class="el" href="namespaceUnifiedAutomation_1_1UaClient.html#a2700df4561d24c85aa11d635062a07cc">UpdateEndpointEventHandler</a>. </p>
<p>The CreateSession action is started once the Session object has a complete <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1EndpointDescription.html">EndpointDescription</a> for the Server. It could have gotten this <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1EndpointDescription.html">EndpointDescription</a> directly in the BeginConnect call or by calling GetEndpoints. It sends a CreateSession request to the Server.</p>
<p>The ActivateSession action is started once the CreateSession action completes or the watchdog timer detects an error. It sends an ActivateSession request to the Server.</p>
<p>The Session object enters the Connected state when the ActivateSession action completes successfully. While in the Connected state a watchdog timer will periodically expire and check the status of the connection to the Server.</p>
<p>The WatchdogExpired action is started when the watchdog timer expires. If there is a communication error with the Server and the AutomaticReconnect property is TRUE then the ActivateSession action is periodically called until communication is re-established. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="L1ClientSdkOverview.html">Client SDK Overview</a></li>
    <li class="footer">&copy; Unified Automation GmbH - All rights reserved.</li>
  </ul>
</div>
</body>
</html>
