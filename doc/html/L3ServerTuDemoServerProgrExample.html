<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>.NET Based OPC UA Client/Server/PubSub SDK: Program Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header_inner_inner_bg2.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">.NET Based OPC UA Client/Server/PubSub SDK
   &#160;<span id="projectnumber">4.1.0.556</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('L3ServerTuDemoServerProgrExample.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Program Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#DemoServerExampleProgramLogic">Implement the Business Logic</a></li>
<li class="level1"><a href="#DemoServerExampleProgramMethods">Implement Methods</a></li>
<li class="level1"><a href="#DemoServerExampleProgramLinkModelToNode">LinkModelToNode</a></li>
<li class="level1"><a href="#DemoServerExampleProgramExecutableAttribute">Set Executable Attribute</a></li>
<li class="level1"><a href="#DemoServerExampleProgramFireEvents">Fire Events</a></li>
<li class="level1"><a href="#DemoServerExampleProgramExpert">Test with UaExpert</a></li>
</ul>
</div>
<div class="textblock"><p>The Program example is a basic implementation of an <a class="el" href="L2UaPrograms.html">OPC UA Program</a> that counts a value down from 1000 to 0. Please read the <a class="el" href="L2UaPrograms.html">short introduction</a> to Programs if you’re not familiar with the concept.</p>
<p>The Demo Server address space contains the type <em>CountdownStateMachineType</em> having the child <em>Value</em>. This custom ProgramType is a subtype of the ProgramStateMachineType. An instance of this type can be found in the folder Demo → 016_StateMachines → Program.</p>
<p>The sample code can be found in the file DemoNodeManager.StateMachines.cs. There the DemoNodeManager class is extended to connect the program with the nodeset. Furthermore, the file contains the manual written part of the CountdownStateMachineModel class implementing the business logic of the program. The other part was generated by the UaModeler based on the model and can be found in the ModelClasses.cs file.</p>
<h1><a class="anchor" id="DemoServerExampleProgramLogic"></a>
Implement the Business Logic</h1>
<p>The CountdownStateMachineModel is derived from the ProgramStateMachineModel. The ProgramStateMachineModel already implements the whole state machine logic, including the Enumerations for the states and for the transitions and the method <code>SwitchToState</code> to switch to another state.</p>
<p>When the state machine switch to another state a .NET event is raised. We use this event to start and stop our timer:</p>
<div class="fragment"><div class="line">        <span class="keyword">public</span> CountdownStateMachineModel(<span class="keywordtype">int</span> startValue)</div>
<div class="line">        {</div>
<div class="line">            Value = startValue;</div>
<div class="line"></div>
<div class="line">            Switched += (o, e) =&gt;</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">switch</span> (e.OldState)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">case</span> State.Running:</div>
<div class="line">                    <span class="keywordflow">case</span> State.Suspended:</div>
<div class="line">                        StopTimer();</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">switch</span> (e.NewState)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">case</span> State.Ready:</div>
<div class="line">                        Value = startValue;</div>
<div class="line">                        RecycleCount++;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> State.Running:</div>
<div class="line">                        StartTimer();</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            };</div>
<div class="line">        }</div>
</div><!-- fragment --><p> Once the timer is running the OnTimer method will be called cyclically and decrement the <em>Value</em> until the value zero is reached. The state machine will then be switched to the Halted state.</p>
<div class="fragment"><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> OnTimer(<span class="keywordtype">object</span> state)</div>
<div class="line">        {</div>
<div class="line">            Value--;</div>
<div class="line">            <span class="keywordflow">if</span> (Value == 0)</div>
<div class="line">            {</div>
<div class="line">                Timer.Dispose();</div>
<div class="line">                Timer = null;</div>
<div class="line"></div>
<div class="line">                SwitchToState(State.Halted);</div>
<div class="line">            }</div>
</div><!-- fragment --><p> A .NET progress event will be raised on every hundredth tick. We will later transform this to an OPC UA event.</p>
<div class="fragment"><div class="line">            <span class="keywordflow">if</span> (Value % 100 == 0 &amp;&amp; Value &gt; 0)</div>
<div class="line">            {</div>
<div class="line">                RaiseProgressChanged();</div>
<div class="line">            }</div>
<div class="line">        }</div>
</div><!-- fragment --> <h1><a class="anchor" id="DemoServerExampleProgramMethods"></a>
Implement Methods</h1>
<p>The methods of the ProgramState are implemented by the CountdownStateMachineModel. So CountdownStateMachineModel needs to implement the Interface IProgramStateMachineMethods.</p>
<div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">partial class </span>CountdownStateMachineModel : Model.ICountdownStateMachineMethods</div>
<div class="line">    {</div>
</div><!-- fragment --><p> The method implementations basically call the <code>SwitchToState()</code> method if the preceding current state validation was positive:</p>
<div class="fragment"><div class="line">        <span class="keyword">public</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a72381d4605940627a6e846d5f3155c51">StatusCode</a> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#ab8e6645eda636fe7468fb36fa8987c90aa6122a65eaa676f700ae68d393054a37">Start</a>(RequestContext context, CountdownStateMachineModel model)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (InternalState != State.Ready)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">return</span> StatusCodes.BadInvalidState;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            SwitchToState(State.Running);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">return</span> StatusCodes.Good;</div>
<div class="line">        }</div>
</div><!-- fragment --><h1><a class="anchor" id="DemoServerExampleProgramLinkModelToNode"></a>
LinkModelToNode</h1>
<p>After implementing the business logic and the methods we need to link the CountdownStateMachineModel to the nodes in the address space. This is done in the <code>SetupProgramStateMachine()</code> method, which is called during startup of the server.</p>
<div class="fragment"><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> SetupProgramStateMachine()</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a4b5bd8a54893c87287a22228b5ef2bc8">NodeId</a> programId = <span class="keyword">new</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a4b5bd8a54893c87287a22228b5ef2bc8">NodeId</a>(<a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a2c601667c467451ea4f1951ffba327baaf0258b6685684c113bad94d91b8fa02a">Demo</a>.Model.Objects.Demo_StateMachines_Program, DefaultNamespaceIndex);</div>
<div class="line">            <span class="keywordtype">string</span> programName = <span class="stringliteral">&quot;Program&quot;</span>;</div>
<div class="line"></div>
<div class="line">            var program = <span class="keyword">new</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a2c601667c467451ea4f1951ffba327baaf0258b6685684c113bad94d91b8fa02a">Demo</a>.Model.CountdownStateMachineModel(1000);</div>
<div class="line">            program.SwitchToState(ProgramStateMachineModel.State.Ready);</div>
<div class="line"></div>
<div class="line">            LinkModelToNode(</div>
<div class="line">                programId,</div>
<div class="line">                program,</div>
<div class="line">                null,</div>
<div class="line">                null,</div>
<div class="line">                0);</div>
</div><!-- fragment --><p> This will take care that data access to the model nodes will be redirected to our model class. In addition it will call the previously implemented methods on client's call requests.</p>
<h1><a class="anchor" id="DemoServerExampleProgramExecutableAttribute"></a>
Set Executable Attribute</h1>
<p>Depending on the current state of the Program Finite State Machine, some Methods cannot be called by the client. So we set the Executable attribute to false if a Method cannot be called by a client. We add the NodeIds of the Methods as property to the class DemoNodeManager.</p>
<div class="fragment"><div class="line">            StartId = GetMethodId(programId, <span class="keyword">new</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328ab4a75c1b2cfd3cb752898835cad346b0">QualifiedName</a>(BrowseNames.Start));</div>
<div class="line">            SuspendId = GetMethodId(programId, <span class="keyword">new</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328ab4a75c1b2cfd3cb752898835cad346b0">QualifiedName</a>(BrowseNames.Suspend));</div>
<div class="line">            HaltId = GetMethodId(programId, <span class="keyword">new</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328ab4a75c1b2cfd3cb752898835cad346b0">QualifiedName</a>(BrowseNames.Halt));</div>
<div class="line">            ResetId = GetMethodId(programId, <span class="keyword">new</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328ab4a75c1b2cfd3cb752898835cad346b0">QualifiedName</a>(BrowseNames.Reset));</div>
<div class="line">            ResumeId = GetMethodId(programId, <span class="keyword">new</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328ab4a75c1b2cfd3cb752898835cad346b0">QualifiedName</a>(BrowseNames.Resume));</div>
</div><!-- fragment --><p> We use the ServerInternalClient to get the method ids:</p>
<div class="fragment"><div class="line">        <span class="keyword">private</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a4b5bd8a54893c87287a22228b5ef2bc8">NodeId</a> GetMethodId(NodeId programId, QualifiedName methodName)</div>
<div class="line">        {</div>
<div class="line">            var result = <span class="keyword">new</span> BrowsePathResult();</div>
<div class="line">            <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a4ee1c62aa1346abfd54798f6d167a766a9aa1b03934893d7134a660af4204f2a9">Server</a>.InternalClient.Translate(</div>
<div class="line">                <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a4ee1c62aa1346abfd54798f6d167a766a9aa1b03934893d7134a660af4204f2a9">Server</a>.DefaultRequestContext,</div>
<div class="line">                programId,</div>
<div class="line">                <span class="keyword">new</span> RelativePath(methodName),</div>
<div class="line">                0,</div>
<div class="line">                result);</div>
<div class="line">            <span class="keywordflow">return</span> (NodeId)result.Targets[0].TargetId;</div>
<div class="line">        }</div>
</div><!-- fragment --><p> Whenever the state machine transitions to a new state, the executable attributes are updated.</p>
<div class="fragment"><div class="line">                <span class="keywordflow">switch</span> (e.Transition)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">case</span> ProgramStateMachineModel.Transition.HaltedToReady:</div>
<div class="line">                        SetExecutable(ResetId, <span class="keyword">false</span>);</div>
<div class="line">                        SetExecutable(StartId, <span class="keyword">true</span>);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> ProgramStateMachineModel.Transition.ReadyToHalted:</div>
<div class="line">                        SetExecutable(HaltId, <span class="keyword">false</span>);</div>
<div class="line">                        SetExecutable(ResetId, <span class="keyword">true</span>);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
</div><!-- fragment --><p> We utilize here again the ServerInternalClient, this time to write the Executable attribute.</p>
<div class="fragment"><div class="line">        <span class="keywordtype">void</span> SetExecutable(NodeId nodeId, <span class="keywordtype">bool</span> value)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a4ee1c62aa1346abfd54798f6d167a766a9aa1b03934893d7134a660af4204f2a9">Server</a>.InternalClient.WriteAttribute(</div>
<div class="line">                <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a4ee1c62aa1346abfd54798f6d167a766a9aa1b03934893d7134a660af4204f2a9">Server</a>.DefaultRequestContext,</div>
<div class="line">                nodeId,</div>
<div class="line">                Attributes.Executable,</div>
<div class="line">                <span class="keyword">new</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a492f18b60811bf85ce118c0c6a1a5c4a">Variant</a>(value));</div>
<div class="line">        }</div>
</div><!-- fragment --> <h1><a class="anchor" id="DemoServerExampleProgramFireEvents"></a>
Fire Events</h1>
<p>This example demonstrates two different ways to generate OPC UA events by means of the ProgramTransitionEventType and the ProgressEventType.</p>
<p>For the transition event we subscribe to the model's <code>Switched</code> event. There an instance of the (generated) ProgramTransitionEventModel class is created and the relevant properties are set.</p>
<div class="fragment"><div class="line">            program.Switched += (o, e) =&gt;</div>
<div class="line">            {</div>
<div class="line">                var ev = <span class="keyword">new</span> ProgramTransitionEventModel()</div>
<div class="line">                {</div>
<div class="line">                    Time = <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a8cf10d2341ed01492506085688270c1e">DateTime</a>.UtcNow,</div>
<div class="line">                    IntermediateResult = program.Value,</div>
<div class="line">                    SourceNode = programId,</div>
<div class="line">                    SourceName = programName,</div>
<div class="line">                    Severity = (ushort) <a class="code" href="namespaceUnifiedAutomation_1_1UaServer.html#a53eb44cce8051866958dfef2effb3bd0">EventSeverity</a>.Medium,</div>
<div class="line">                    EventType = ObjectTypeIds.ProgramTransitionEventType,</div>
<div class="line">                    Message = <span class="keyword">new</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a26889eee67d7ccc649f6188d0c20ad2b">LocalizedText</a>(<span class="stringliteral">&quot;Transition&quot;</span>),</div>
<div class="line">                };</div>
</div><!-- fragment --><p> The model class, like all generated event classes, has one method to generated a generic event based on the model. This generic event can then be reported to the NodeManager.</p>
<div class="fragment"><div class="line">                GenericEvent ge = ev.CreateEvent(<a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a4ee1c62aa1346abfd54798f6d167a766a9aa1b03934893d7134a660af4204f2a9">Server</a>.FilterManager, <span class="keyword">true</span>);</div>
<div class="line">                ReportEvent(programId, ge);</div>
</div><!-- fragment --><p> For the progress event we subscribe to the models <code>ProgressChanged</code>. Here the GenericEvent is generated directly and the relevant properties are set with the <code>Set()</code> method.</p>
<div class="fragment"><div class="line">            program.ProgressChanged += (o, e) =&gt;</div>
<div class="line">            {</div>
<div class="line">                GenericEvent ev = <span class="keyword">new</span> GenericEvent(<a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a4ee1c62aa1346abfd54798f6d167a766a9aa1b03934893d7134a660af4204f2a9">Server</a>.FilterManager);</div>
<div class="line">                ev.Initialize(</div>
<div class="line">                    null,</div>
<div class="line">                    ObjectTypeIds.ProgressEventType,</div>
<div class="line">                    programId,</div>
<div class="line">                    programName,</div>
<div class="line">                    <a class="code" href="namespaceUnifiedAutomation_1_1UaServer.html#a53eb44cce8051866958dfef2effb3bd0">EventSeverity</a>.Medium,</div>
<div class="line">                    <span class="keyword">new</span> <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a26889eee67d7ccc649f6188d0c20ad2b">LocalizedText</a>(<span class="stringliteral">&quot;Progress&quot;</span>));</div>
<div class="line">                ev.Set(BrowseNames.Context, programId);</div>
<div class="line">                ev.Set(BrowseNames.Progress, (ushort)e.ProgressPercentage);</div>
<div class="line"></div>
<div class="line">                ReportEvent(programId, ev);</div>
<div class="line">            };</div>
</div><!-- fragment --><h1><a class="anchor" id="DemoServerExampleProgramExpert"></a>
Test with UaExpert</h1>
<p>Finally, we can test the implementation with a client, e.g. UaExpert.</p>
<p>First we drag and drop the variables <em>Value</em>, <em>CurrentState</em>, and <em>LastTransition</em> to the DA View (see screenshot below). The variable <em>CurrentState</em> has the value <em>Ready</em>, because the program hasn’t been started yet. Thus, <em>LastTransition</em> is empty, because no transition has taken place. The value of <em>Value</em> is <em>1000</em>, because the countdown hasn’t started yet.</p>
<div class="image">
<img src="demoserver_program_1.png" alt="demoserver_program_1.png"/>
<div class="caption">
DA View before starting the program</div></div>
<p> Then choose <em>Document</em> → <em>Add…</em> from the menu. Select <em>Event View</em> from the drop-down list and confirm with <em>OK</em>. Drag and drop the <em>Program</em> object to the event view (see screenshot). We are now ready to receive transition events.</p>
<div class="image">
<img src="demoserver_program_2.png" alt="demoserver_program_2.png"/>
<div class="caption">
Event View containing the program object</div></div>
<p> Switch back to the DA View and call the method <em>Start</em>. The value of <em>CurrentState</em> has changed to running. <em>LastTransition</em> has the value <em>ReadyToRunning</em> and the value of <em>Value</em> is decreasing. When switching to the Event View, we can see the transition event in the list of events.</p>
<div class="image">
<img src="demoserver_program_3.png" alt="demoserver_program_3.png"/>
<div class="caption">
DA View containing the changed variable values and Event View with transition event</div></div>
<p> Switch back to the DA View and call the method <em>Suspend</em>. The countdown stops and the values of <em>CurrentState</em> and <em>LastTransition</em> change accordingly. When calling the method <em>Suspend</em> again, you will get an error, because the method cannot be called in the suspended state.</p>
<p>Call the method <em>Resume</em> and wait for the program to finish if you like. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="L1ServerTutorials.html">Tutorials for Server development</a></li><li class="navelem"><a class="el" href="L2ServerTutDemoServer.html">.NET SDK Demo Server</a></li>
    <li class="footer">&copy; Unified Automation GmbH - All rights reserved.</li>
  </ul>
</div>
</body>
</html>
