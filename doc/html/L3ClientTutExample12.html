<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>.NET Based OPC UA Client/Server/PubSub SDK: Browse/Translate – Browse</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header_inner_inner_bg2.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">.NET Based OPC UA Client/Server/PubSub SDK
   &#160;<span id="projectnumber">4.1.0.556</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('L3ClientTutExample12.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Browse/Translate – Browse </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#L4ClientTutExample12Pre">Prerequisites</a></li>
<li class="level1"><a href="#L4ClientTutExample12Desc">Description</a></li>
<li class="level1"><a href="#L4ClientTutExample12Code">Sample Code</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="L4ClientTutExample12Pre"></a>
Prerequisites</h1>
<p>A session with the server must be established.</p>
<h1><a class="anchor" id="L4ClientTutExample12Desc"></a>
Description</h1>
<p>The following dialog shows an example implementation of the Browse service, which can be used to read references from a node. Press the button “Show Code” to display the corresponding code, and the button “Help” to show this documentation page.</p>
<div class="image">
<img src="clienttutorials_browse.png" alt="clienttutorials_browse.png"/>
</div>
<p>First, you have to specify some parameters to filter your results. Klick on the button “...” right of the field “Node ID” to open an adress space browser, select the desired node and confirm with “OK”. Now, the NodeId is shown at the corresponding field.</p>
<div class="image">
<img src="clienttutorials_read_attribute2.png" alt="clienttutorials_read_attribute2.png"/>
</div>
<p>Pick a browse direction from the drop down menu.</p>
<div class="image">
<img src="clienttutorials_browse2.png" alt="clienttutorials_browse2.png"/>
</div>
<p>On pressing the button “...” right of the field “Reference Type”, a browse window opens. This allows you to further restrain the results. Check the box in front of “Include Subtypes” to return subtypes of the reference type as well.</p>
<div class="image">
<img src="clienttutorials_browse3.png" alt="clienttutorials_browse3.png"/>
</div>
<p>By specifiying “Max References” you can limit the maximum number of references in a single response. If specified, a continuation point is set and the method BrowseNext is called repeatedly until all references are returned. Select “0” to get all references in a single response.</p>
<p>After pressing the button “Browse” the reference types matching your request are shown in the table at “Browse Response”. Check the box in front of “Use Asynchronous Pattern” to call “BeginBrowse” instead of “Browse”.</p>
<div class="image">
<img src="clienttutorials_browse4.png" alt="clienttutorials_browse4.png"/>
</div>
<h1><a class="anchor" id="L4ClientTutExample12Code"></a>
Sample Code</h1>
<p>First we need to fill the BrowseContext to specify</p>
<ul>
<li>the direction, i.e. if forward, inverse, or both kinds of references are returned;</li>
<li>the reference type, i.e. references having this ReferenceType will be returned;</li>
<li>IncludeSubtypes to select whether references are returned that have a subtype of the reference type selected above</li>
<li>the maximum number of references returned in one service call.</li>
</ul>
<p><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1BrowseContext.html">BrowseContext</a> </p><div class="fragment"><div class="line">                <span class="comment">// set up the browse filters.</span></div>
<div class="line">                BrowseContext context = <span class="keyword">new</span> BrowseContext();</div>
<div class="line"></div>
<div class="line">                context.BrowseDirection = (BrowseDirection)BrowseDirectionCB.SelectedItem;</div>
<div class="line">                context.ReferenceTypeId = (NodeId)ReferenceTypeTB.Tag;</div>
<div class="line">                context.IncludeSubtypes = IncludeSubtypesCK.Checked;</div>
<div class="line">                context.MaxReferencesToReturn = (uint)MaxReferencesUD.Value;</div>
</div><!-- fragment --><p> The starting NodeId that is used for the Browse operation is provided by the GUI in standard XML format. So <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1NodeId.html#ae175c5c20191c742e40172270cd9c47b">NodeId.Parse</a> can be used to get the NodeId. A continuation point has to be used as out parameter.</p>
<ul>
<li><a class="el" href="classUnifiedAutomation_1_1UaBase_1_1NodeId.html#ae175c5c20191c742e40172270cd9c47b">NodeId.Parse</a></li>
<li><a class="el" href="classUnifiedAutomation_1_1UaBase_1_1ReferenceDescription.html">ReferenceDescription</a></li>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#aa3c1f3d27a86927a3c9349c16989eda1">Browse</a></li>
</ul>
<div class="fragment"><div class="line">                <span class="comment">// parse the node id.</span></div>
<div class="line">                <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a4b5bd8a54893c87287a22228b5ef2bc8">NodeId</a> nodeId = <a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a4b5bd8a54893c87287a22228b5ef2bc8">NodeId</a>.Parse(NodeIdTB.Text);</div>
<div class="line"></div>
<div class="line">                <span class="comment">// this is a blocking call so show the wait cursor.</span></div>
<div class="line">                Cursor = Cursors.WaitCursor;</div>
<div class="line"></div>
<div class="line">                byte[] continuationPoint = null;</div>
<div class="line"></div>
<div class="line">                <span class="comment">// browse the references (setting a 10 second timeout).</span></div>
<div class="line">                List&lt;ReferenceDescription&gt; references = session.Browse(</div>
<div class="line">                    nodeId,</div>
<div class="line">                    context,</div>
<div class="line">                    <span class="keyword">new</span> RequestSettings() { OperationTimeout = 10000 },</div>
<div class="line">                    out continuationPoint);</div>
</div><!-- fragment --><p> There is a maximum number of <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1ReferenceDescription.html">ReferenceDescriptions</a> that can be returned in a single Browse operation. If there are more reference descriptions available on the server that can be retrieved, the continuation point is not null, otherwise the continuation point is null.</p>
<p>This continuation point can used to get the next chunk of reference descriptions from the server. If the client is not interested in the next set of references, the continuation point has to be released.</p>
<ul>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#abdaec046fd5012ea7028b035a061bfc5">ReleaseBrowseContinuationPoint</a></li>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html#a0e2591e37a9571e2c8ea8c671833ba4d">BrowseNext</a></li>
</ul>
<div class="fragment"><div class="line">                m_continueAutomatically = context.MaxReferencesToReturn &lt;= 0;</div>
</div><!-- fragment --><div class="fragment"><div class="line">                <span class="keywordflow">while</span> (!<a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a58efa9e8b8491c4a42cbf3bead1b06b6">ByteString</a>.IsNull(continuationPoint))</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">if</span> (!m_continueAutomatically)</div>
<div class="line">                    {</div>
<div class="line">                        session.ReleaseBrowseContinuationPoint(continuationPoint);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    references = session.BrowseNext(<span class="keyword">new</span> RequestSettings() { OperationTimeout = 10000 }, ref continuationPoint);</div>
</div><!-- fragment --></div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="L1ClientTutorials.html">Tutorials for Client development</a></li><li class="navelem"><a class="el" href="L2ClientTutExamples.html">Getting Started</a></li>
    <li class="footer">&copy; Unified Automation GmbH - All rights reserved.</li>
  </ul>
</div>
</body>
</html>
