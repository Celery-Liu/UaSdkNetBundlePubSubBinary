<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>.NET Based OPC UA Client/Server/PubSub SDK: OPC UA PubSub Messaging Concept</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header_inner_inner_bg2.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">.NET Based OPC UA Client/Server/PubSub SDK
   &#160;<span id="projectnumber">4.1.0.556</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('L2UaPubSubConcept.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">OPC UA PubSub Messaging Concept </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The OPC UA Client/Server communication model defines already a subscription (see <a class="el" href="L2UaSubscription.html">OPC UA Client/Server Subscription Concept</a>) that allows OPC UA Clients to subscribe for changes of Variable Values or for Event notifications. The Client/Server subscription is specific to the client who created the subscription and ensures reliable one time delivery of data changes and events.</p>
<p>The OPC UA PubSub communication model provides an optimized Publish Subscribe model for use cases where the Client/Server Subscription does not fit. One use case is high speed and cyclic data communication, where reliability is not required. Another use case is offloading of data distribution to a large (unlimited) number of receivers (Subscribers).</p>
<p>In this model, the Publisher produces messages that are sent to a so called Message Oriented Middleware. This Message Oriented Middleware can be network infrastructure like switches if UDP multi-cast is used as transport protocol or could be a message broker if MQTT is used as transport protocol. The Publisher sends the messages independent of the number of Subscribers. Therefore the role of a Subscriber receiving messages is independent of the application that configures what the Publisher is sending. The number of possible Subscribers scales with the network infrastructure or the message broker infrastructure. It is independent of the Publisher.</p>
<div class="image">
<img src="pubsubbigpicture.png" alt="pubsubbigpicture.png"/>
<div class="caption">
PubSub Big Picture</div></div>
<p> The content of the exchanged messages is called DataSet. The DataSetMetaData describes the layout of the messages and can provide additional meta-data like units for the fields in the DataSet.</p>
<p>The selection of the input for the DataSet messages in the Publisher is called PublishedDataSet. The selection can be a list of Variable Values or the fields on an EventType.</p>
<p>A DataSetWriter in the Publisher creates DataSet messages either cyclically for list of Variables or in the case of an event if the DataSet is event based. Several DataSet messages can be combined into a network message. Network messages are sent from the Publisher to the middleware using one of the transport protocols.</p>
<p>Depending on the transport protocol, the DataSetMetaData can be transported in-line from the Publisher to the Subscriber. But in most configuration scenarios, the DataSetMetaData is provided to the Subscriber as part of the initial configuration.</p>
<p>Subscribers select or filter the DataSet message they are interested in. For UDP this is typically done based on a Publisher and DataSetWriter identification in the network message. In the case of MQTT this is typically done by subscribing to a MQTT topic where the Publisher sends the DataSet messages to.</p>
<p>The UADP message mapping provides an end-to-end security option that requires a security key server for the distribution of session keys. They are used for signing and encryption of messages.</p>
<p>The following figure shows the configuration model for OPC UA PubSub.</p>
<div class="image">
<img src="pubsubconfigmodel.png" alt="pubsubconfigmodel.png"/>
<div class="caption">
PubSub configuration model</div></div>
<p> A PubSub connection defines the used protocol and the network address for sending or receiving messages. In the case of a message broker, the address represents a TCP/IP connection to the broker endpoint. In the case of UDP, this could be an IP multi-cast group. The selected protocol defines also the protocol specific headers used for the sent messages.</p>
<p>A WriterGroup defines the timing and header settings for PubSub NetworkMessages sent by a Publisher. Such a NetworkMessage can contain one or more DataSetMessages for the DataSetWriters contained in the WriterGroup.</p>
<p>The DataSetWriter is linked to a PublishedDataSet that defines the source of the message content and the DataSetMetaData. In addition the DataSetWriter defines the header settings for the DataSetMessage.</p>
<p>The DataSetReader is the counterpart to a DataSetWriter on the Subscriber side. It defines the filter for the selection of the Publisher and DataSetWriter of interest. It also contains the SubscribedDataSet that defines the processing of the received data. The default processing is a mapping to target variables in the Subscriber address space.</p>
<p>OPC UA PubSub defines different transport protocol mappings like UDP and MQTT and different message mappings like UADP (UA Datagram Protocol) and JSON.</p>
<p>The different configuration objects have generic settings and typically also transport and message mapping specific settings.</p>
<p>The next chapter describes <a class="el" href="L2UaDiscoveryConnect.html">Discovery and Security Configuration</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="L1OpcOverview.html">OPC Overview</a></li><li class="navelem"><a class="el" href="L1OpcUaFundamentals.html">OPC UA Fundamentals</a></li>
    <li class="footer">&copy; Unified Automation GmbH - All rights reserved.</li>
  </ul>
</div>
</body>
</html>
