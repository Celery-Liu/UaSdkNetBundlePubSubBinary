<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>.NET Based OPC UA Client/Server/PubSub SDK: OPC UA Data Types</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header_inner_inner_bg2.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">.NET Based OPC UA Client/Server/PubSub SDK
   &#160;<span id="projectnumber">4.1.0.556</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('L2DataTypes.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">OPC UA Data Types </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#L2DataTypesOverview">Overview and built-in DataTypes</a></li>
<li class="level1"><a href="#L2DataTypesCustom">Application specific DataTypes</a></li>
<li class="level1"><a href="#L2DataTypesDefinitionAttribute">DataTypeDefinition Attribute</a></li>
<li class="level1"><a href="#L2DataTypesDictionary">DataType Dictionary (deprecated)</a></li>
<li class="level1"><a href="#L2DataTypesClientHandling">Client side handling of structure DataTypes</a></li>
</ul>
</div>
<div class="textblock"><p>The following page describes the concepts for OPC UA data types.</p>
<h1><a class="anchor" id="L2DataTypesOverview"></a>
Overview and built-in DataTypes</h1>
<p>OPC UA variables, methods and events are used to exchange application specific data as variable value, method arguments or event fields. Such application specific data can use different DataTypes. The ValueRank is defined in addition to indicate if the DataType is used as scalar value (-1), as array (1) or as multidimensional array (&gt;1).</p>
<p>DataTypes are exposed as nodes in the server address space. These nodes build a type hierarchy with the BaseDataType as root of the DataType hierarchy.</p>
<div class="image">
<img src="datatypes_overview.png" alt="datatypes_overview.png"/>
<div class="caption">
OPC UA Data Type hierarchy</div></div>
<p> OPC UA defines 24 so called built-in DataTypes. These built-in DataTypes are either simple DataTypes like Boolean, floating point types, integer types, string or they are structures like NodeId that are used in OPC UA services.</p>
<table class="doxtable">
<tr>
<th>Built-in DataType</th><th>Description  </th></tr>
<tr>
<td>Boolean </td><td>A value that is either TRUE or FALSE  </td></tr>
<tr>
<td>SByte </td><td>One byte signed integer between −128 and 127 inclusive.  </td></tr>
<tr>
<td>Byte </td><td>One byte unsigned integer in the range of 0 to 255 inclusive.  </td></tr>
<tr>
<td>Int16 </td><td>Two byte (16-bit) signed integer between −32 768 and 32 767 inclusive.  </td></tr>
<tr>
<td>UInt16 </td><td>Two byte (16-bit) unsigned integer in the range of 0 to 65 535 inclusive.  </td></tr>
<tr>
<td>Int32 </td><td>Four byte (32-bit) signed integer between −2 147 483 648 and 2 147 483 647 inclusive.  </td></tr>
<tr>
<td>UInt32 </td><td>Four byte (32-bit) unsigned integer in the range of 0 to 4 294 967 295 inclusive.  </td></tr>
<tr>
<td>Int64 </td><td>Eight byte (64-bit) signed integer between −9 223 372 036 854 775 808 and 9 223 372 036 854 775 807 inclusive.  </td></tr>
<tr>
<td>UInt64 </td><td>Eight byte (64-bit) unsigned integer in the range of 0 to 18 446 744 073 709 551 615 inclusive.  </td></tr>
<tr>
<td>Float </td><td>Four byte floating point value that adheres to the ISO/IEC/IEEE 60559:2011 single precision data type definition.  </td></tr>
<tr>
<td>Double </td><td>Eight byte floating point value that adheres to the ISO/IEC/IEEE 60559:2011 double precision data type definition.  </td></tr>
<tr>
<td>String </td><td>Unicode character string that should exclude control characters that are not white-spaces.  </td></tr>
<tr>
<td>DateTime </td><td>Date and time represented as 64-bit signed integer which represents the number of 100 nanosecond intervals since January 1, 1601 (UTC).  </td></tr>
<tr>
<td>Guid </td><td>128-bit Globally Unique Identifier.  </td></tr>
<tr>
<td>ByteString </td><td>Sequence of Byte values with length information.  </td></tr>
<tr>
<td>XmlElement </td><td>DataType used to transport XML elements.  </td></tr>
<tr>
<td>ExtensionObject </td><td>Used to transport structure DataTypes. The ExtensionObject contains the encoding NodeId of the structure DataType and the structure as blob encoded in the requested format.  </td></tr>
<tr>
<td>NodeId </td><td>Globally unique identifier for a Node in the OPC UA server address space. See <a class="el" href="L2UaNodeIds.html#UaNodeIdsConcept">OPC UA NodeIds</a> for more details. The DataType is mainly used in OPC UA services.  </td></tr>
<tr>
<td>ExpandedNodeId </td><td>Extended NodeId used to refer to Nodes in other OPC UA Servers. The DataType is mainly used in OPC UA services.  </td></tr>
<tr>
<td>StatusCode </td><td>Four byte numerical value that is used to report the overall result of an operation performed by an OPC UA server. StatusCodes are defined by the OPC UA specification. Application specific StatusCodes are not allowed. The DataType is mainly used in OPC UA services.  </td></tr>
<tr>
<td>QualifiedName </td><td>Qualified name that consists of a name and a namespace. The name part of the QualifiedName is restricted to 512 characters. The DataType is mainly used in OPC UA services.  </td></tr>
<tr>
<td>LocalizedText </td><td>Localized text that consists of the text in a locale-specific translation and the identifier for the locale. The DataType is mainly used in OPC UA services.  </td></tr>
<tr>
<td>DataValue </td><td>Structure used to transport values of variables together with a StatusCode and timestamps. The DataType is only used in OPC UA services.  </td></tr>
<tr>
<td>DiagnosticInfo </td><td>Structure used to provide additional optional diagnostic information for an operation performed by an OPC UA server. The DataType is only used in OPC UA services.  </td></tr>
</table>
<p>These built-in DataTypes are transported on the wire in a Variant union. This includes arrays or multidimensional arrays of the built-in DataTypes.</p>
<p>Any other OPC UA or application defined DataType can be transported using one of these built-in DataTypes. This is described in the next section.</p>
<h1><a class="anchor" id="L2DataTypesCustom"></a>
Application specific DataTypes</h1>
<p>Any subtype of simple types like Duration (subtype of Double) is represented as the corresponding built-in type on the wire.</p>
<p>There are three DataTypes (Enumerations, OptionSets and Structures), where application specific sub-types define the semantic of the DataType and its values. The data is transported as one of the built-in DataTypes but the client need to read additional information from the server type system to get the semantic.</p>
<div class="image">
<img src="datatypes_semantic.png" alt="datatypes_semantic.png"/>
<div class="caption">
Semantic of application specific DataTypes</div></div>
<p> Enumeration DataTypes are transported as 32 bit signed integer built-in DataType. The name of the different enumeration values are exposed as EnumStrings property of the Enumeration DataType.</p>
<p>OptionSet DataTypes (bit masks) are transported as one of the unsigned integer built-in DataTypes. The name of the bits in the bit mask is exposed as OptionSetValues property of the OptionSet DataType.</p>
<p>Structure DataTypes are transported with the special built-in DataType ExtensionObject. An ExtensionObject contains the encoding NodeId of the structure DataType and the structure as blob encoded in the requested format e.g. OPC UA Binary.</p>
<p>The encoding NodeId is provided by an object of type DataTypeEncodingType. This object is referenced by the structure DataType with a non-hierarchical HasEncoding reference. The browse name of this object for OPC UA Binary encoding is 'Default Binary'. A server may support other encodings like JSON encoding. In this case, the server references more than one encoding object from the structure DataType node.</p>
<p>The fields of the structure DataType are described by the value of the DataTypeDefinition attribute of the structure DataType node (e.g. MyStruct).</p>
<h1><a class="anchor" id="L2DataTypesDefinitionAttribute"></a>
DataTypeDefinition Attribute</h1>
<p>The DataTypeDefinition attribute was introduced in OPC UA 1.04 and provides a simplified option to get access to the meta-data of a structure DataType. It is also provided for Enumeration and OptionSet DataTypes.</p>
<p>The DataTypeDefinition Attribute contains either a structureDefinition or an EnumDefinition. The following table contains the description of the SsructureDefinition DataType.</p>
<p><b>Fields of the structureDefinition DataType</b></p>
<table class="doxtable">
<tr>
<th>Structure field name</th><th>Structure field DataType</th><th>Description  </th></tr>
<tr>
<td>DefaultEncodingId </td><td>NodeId </td><td>The NodeId of the default DataTypeEncoding for the DataType. The default depends on the message encoding, Default Binary for UA Binary encoding, Default JSON for JSON encoding and Default XML for XML encoding.  </td></tr>
<tr>
<td>BaseDataType </td><td>NodeId </td><td>The NodeId of the direct super-type of the DataType. This might be the abstract structure or the Union DataType.  </td></tr>
<tr>
<td>StructureType </td><td>Enum StructureType </td><td>An enumeration that specifies the type of structure defined by the DataType. Options are structure (A structure without optional fields), structureWithOptionalFields (A structure with optional fields) and Union (A Union DataType). Only one of the fields defined for the data type is encoded into a value if the data type is a Union.  </td></tr>
<tr>
<td>Fields </td><td>StructureField [] </td><td>The list of fields that make up the data type. This definition assumes the structure has a sequential layout. For structures derived from another structure DataType this list starts with the fields of the BaseDataType followed by the fields of this StructureDefinition.  </td></tr>
</table>
<p><b>Fields of the StructureField DataType</b></p>
<table class="doxtable">
<tr>
<th>Structure field name</th><th>Structure field DataType</th><th>Description  </th></tr>
<tr>
<td>Name </td><td>String </td><td>A name for the field that is unique within the StructureDefinition.  </td></tr>
<tr>
<td>Description </td><td>LocalizedText </td><td>A localized description of the field.  </td></tr>
<tr>
<td>DataType </td><td>NodeId </td><td>The NodeId of the DataType for the field.  </td></tr>
<tr>
<td>ValueRank </td><td>Int32 </td><td>The value rank for the field. It shall be Scalar (-1) or a fixed rank Array (&gt;=1).  </td></tr>
<tr>
<td>ArrayDimensions </td><td>UInt32[] </td><td>This field specifies the maximum supported length of each dimension. If the maximum is unknown the value shall be 0. The number of elements shall be equal to the value of the valueRank field. This field shall be null if valueRank ≤ 0. The maximum number of elements of an array transferred on the wire is 2147483647 (max Int32).  </td></tr>
<tr>
<td>MaxStringLength </td><td>UInt32 </td><td>If the DataType field is a String or ByteString then this field specifies the maximum supported length. If the maximum is unknown the value shall be 0. If the DataType field is not a String or ByteString the value shall be 0. If the valueRank is greater than 0 this field applies to each element of the array.  </td></tr>
</table>
<p>To encode or decode data in or from an ExtensionObject, the application needs to have the list of fields in the structure DataType. If a structure field has a built-in DataType, the corresponding encoding or decoding can be used. If a structure field is again a structure, the fields of this structure must be decoded with the rules for the contained built-in DataType.</p>
<h1><a class="anchor" id="L2DataTypesDictionary"></a>
DataType Dictionary (deprecated)</h1>
<p>The older and deprecated way to expose the description of structure DataTypes in an OPC UA server address space is a DataTypeDictionary.</p>
<div class="image">
<img src="datatypes_dictionary.png" alt="datatypes_dictionary.png"/>
<div class="caption">
DataType Dictionary</div></div>
<p> The DataTypeDictionary is a XML file that is provided by a variable of type DataTypeDictionaryType. The value of the variable contains the XML document. In the example above, this is the variable with the name 'MyDictionary'.</p>
<p>The following example shows a dictionary XML file with two structure DataTypes.</p>
<div class="fragment"><div class="line">&lt;opc:TypeDictionary xmlns:xsi=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> xmlns:tns=<span class="stringliteral">&quot;http://yourorganisation.org/StructExample/&quot;</span> DefaultByteOrder=<span class="stringliteral">&quot;LittleEndian&quot;</span> xmlns:opc=<span class="stringliteral">&quot;http://opcfoundation.org/BinarySchema/&quot;</span> xmlns:ua=<span class="stringliteral">&quot;http://opcfoundation.org/UA/&quot;</span> TargetNamespace=<span class="stringliteral">&quot;http://yourorganisation.org/StructExample/&quot;</span>&gt;</div>
<div class="line">    &lt;opc:Import Namespace=<span class="stringliteral">&quot;http://opcfoundation.org/UA/&quot;</span>/&gt;</div>
<div class="line">    &lt;opc:StructuredType BaseType=<span class="stringliteral">&quot;ua:ExtensionObject&quot;</span> Name=<span class="stringliteral">&quot;MyStruct&quot;</span>&gt;</div>
<div class="line">        &lt;opc:Field TypeName=<span class="stringliteral">&quot;opc:Double&quot;</span> Name=<span class="stringliteral">&quot;Field_A&quot;</span>/&gt;</div>
<div class="line">        &lt;opc:Field TypeName=<span class="stringliteral">&quot;opc:Int32&quot;</span> Name=<span class="stringliteral">&quot;Field_B&quot;</span>/&gt;</div>
<div class="line">    &lt;/opc:StructuredType&gt;</div>
<div class="line">    &lt;opc:StructuredType BaseType=<span class="stringliteral">&quot;ua:ExtensionObject&quot;</span> Name=<span class="stringliteral">&quot;MyStruct2&quot;</span>&gt;</div>
<div class="line">        &lt;opc:Field TypeName=<span class="stringliteral">&quot;opc:Double&quot;</span> Name=<span class="stringliteral">&quot;Field1&quot;</span>/&gt;</div>
<div class="line">        &lt;opc:Field TypeName=<span class="stringliteral">&quot;opc:Double&quot;</span> Name=<span class="stringliteral">&quot;Field2&quot;</span>/&gt;</div>
<div class="line">    &lt;/opc:StructuredType&gt;</div>
<div class="line">&lt;/opc:TypeDictionary&gt;</div>
</div><!-- fragment --><p>The list of DataTypeDictionaries for OPC UA Binary encoding can be found below Types &gt; DataTypes &gt; OPC Binary.</p>
<p>The relation of a structure DataType to a DataTypeDictionary is created by a chain of OPC UA References from the</p><ul>
<li>Structure DataType Node (MyStruct) following the non-hierarchical HasEncoding reference forward to the</li>
<li>Encoding Object with the name 'Default Binary' following the non-hierarchical HasDescription reference forward to the</li>
<li>DataTypeDescriptionType variable (MyStruct) following the hierarchical HasComponent reference in inverse direction to the</li>
<li>Dictionary variable (MyDictionary)</li>
</ul>
<p>The value of the DataTypeDescriptionType variable matches the name of the structure DataType description in the XML document that is the value of the Dictionary variable. This is normally also the name of the DataType Node and the name of the DataTypeDescriptionType variable.</p>
<h1><a class="anchor" id="L2DataTypesClientHandling"></a>
Client side handling of structure DataTypes</h1>
<p>An OPC UA client that is able to handle structure DataTypes must build a type cache to do the time consuming discovery of the DataType description only once during a working Session with an OPC UA server. After the creation of a new Session, the type cache must be updated.</p>
<p>For each structure DataType, the cache consists of two NodeIds and the DataType description</p><ul>
<li>NodeId of the DataType Node (used for lookup if the DataType is known)</li>
<li>NodeId of the encoding Object Node (used for lookup if the encoding NodeId is known from a received ExtensionObject)</li>
<li>List of structure fields for decoding a received structure value from an ExtensionObject</li>
</ul>
<p>One strategy is to read all descriptions after Session creation with the following steps</p><ul>
<li>Recursively browse all DataType nodes starting from the structure DataType Node</li>
<li>For each structure DataType returned from Browse, read the DataTypeDefinition Attribute</li>
</ul>
<p>If the DataTypeDefinition is present</p><ul>
<li>Store the StructureDefinition with the field information necessary to decode the structure DataType</li>
<li>Add the DataType NodeId to the look-up table to reference the StructureDefinition</li>
<li>Add the encoding NodeId to the look-up table to reference the StructureDefinition. The encoding NodeId is part of the StructureDefinition (DefaultEncodingId)</li>
</ul>
<p>If the DataTypeDefinition is not present</p><ul>
<li>Browse and Read the DataTypeDictionaries below ‘OPC Binary’</li>
<li>Browse to the DataTypeDictionary variable through encoding Object and DataTypeDescription variable as described above</li>
<li>Store the StructureDefinition with the field information necessary to decode the structure DataType from the information in the related DataTypeDictionary XML document</li>
<li>Add the DataType NodeId to the look-up table to reference the StructureDefinition</li>
<li>Add the encoding NodeId to the look-up table to reference the StructureDefinition. The encoding NodeId is part of the browse results for finding the Dictionary</li>
</ul>
<p>The next chapter describes the <a class="el" href="L2UaAdrSpaceConceptNamespaces.html">OPC UA Namespaces</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="L1OpcOverview.html">OPC Overview</a></li><li class="navelem"><a class="el" href="L1OpcUaFundamentals.html">OPC UA Fundamentals</a></li>
    <li class="footer">&copy; Unified Automation GmbH - All rights reserved.</li>
  </ul>
</div>
</body>
</html>
