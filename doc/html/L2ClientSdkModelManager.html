<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>.NET Based OPC UA Client/Server/PubSub SDK: ModelManager</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header_inner_inner_bg2.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">.NET Based OPC UA Client/Server/PubSub SDK
   &#160;<span id="projectnumber">4.1.0.556</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('L2ClientSdkModelManager.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ModelManager </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#L3ClientSdkModelManagerOverview">Overview</a></li>
<li class="level1"><a href="#L3ClientSdkModelManagerStep1">Step 1) Define a Model Class</a></li>
<li class="level1"><a href="#L3ClientSdkModelManagerStep2">Step 2) Perform Operations with the Model</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="L3ClientSdkModelManagerOverview"></a>
Overview</h1>
<p>The <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1ModelManager.html">ModelManager</a> allows the application developer to create classes that represent some portion of the Server address space and to Read from, Write to and Subscribe to the entire object in a single operation. The following steps illustrate what needs to be done to read the few variables which belong to the standard Server object that every Server supports.</p>
<p>A <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1ModelManager.html">ModelManager</a> object is thread-safe.</p>
<h1><a class="anchor" id="L3ClientSdkModelManagerStep1"></a>
Step 1) Define a Model Class</h1>
<div class="fragment"><div class="line">    [UaTypeDefinition(NodeId = <a class="code" href="namespaceUnifiedAutomation.html">UnifiedAutomation</a>.Demo.Model.ObjectTypes.BoilerType, NamespaceUri = <a class="code" href="namespaceUnifiedAutomation.html">UnifiedAutomation</a>.Demo.Model.Namespaces.Model)]</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">partial class </span>BoilerModel</div>
<div class="line">    {</div>
<div class="line"><span class="preprocessor">        #region Constructors</span></div>
<div class="line">        <span class="keyword">public</span> BoilerModel()</div>
<div class="line">        {</div>
<div class="line">        }</div>
<div class="line"><span class="preprocessor">        #endregion</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #region Public Properties</span></div>
<div class="line">        [UaInstanceDeclaration(NamespaceUri = <a class="code" href="namespaceUnifiedAutomation.html">UnifiedAutomation</a>.Demo.Model.Namespaces.Model)]</div>
<div class="line">        <span class="keyword">public</span> <span class="keywordtype">double</span> FillLevelSetPoint { <span class="keyword">get</span>; set; }</div>
<div class="line"></div>
<div class="line">        [UaInstanceDeclaration(NamespaceUri = <a class="code" href="namespaceUnifiedAutomation.html">UnifiedAutomation</a>.Demo.Model.Namespaces.Model)]</div>
<div class="line">        <span class="keyword">public</span> <span class="keywordtype">double</span> TemperatureSetPoint { <span class="keyword">get</span>; set; }</div>
<div class="line"></div>
<div class="line">        [UaInstanceDeclaration(NamespaceUri = <a class="code" href="namespaceUnifiedAutomation.html">UnifiedAutomation</a>.Demo.Model.Namespaces.Model)]</div>
<div class="line">        <span class="keyword">public</span> HeaterStatus HeaterStatus { <span class="keyword">get</span>; set; }</div>
<div class="line"><span class="preprocessor">        #endregion</span></div>
<div class="line">    }</div>
</div><!-- fragment --><p> The attributes used in the example above are defined in the SDK. </p>
<p>The <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1UaTypeDefinitionAttribute.html">UaTypeDefinition</a> attribute indicates that a class represents an ObjectType or a VariableType in an OPC UA information model. NodeId is the identifier portion of the NodeId which is combined with the NamespaceUri to construct a unique NodeId for the type definition. If the NamespaceUri is not specified, the default OPC UA namespace is assumed.</p>
<p>The <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1UaInstanceDeclarationAttribute.html">UaInstanceDeclaration</a> indicates that a property corresponds to a child of the ObjectType or VariableType represented by the containing class. The BrowseName of the child can be explicitly specified. If it is omitted, the name of the property is used as the BrowseName. If the NamespaceUri is not specified, the default OPC UA namespace is assumed.</p>
<p>Properties with the <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1UaInstanceDeclarationAttribute.html">UaInstanceDeclaration</a> attribute can be other classes with the <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1UaTypeDefinitionAttribute.html">UaTypeDefinition</a> attribute defined. If this is the case, browse paths with multiple elements can be constructed to access values in the Server address space. If the child is a Variable, the Value of this Variable can get by specifying a property with a <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1UaInstanceDeclarationAttribute.html">UaInstanceDeclaration</a> with <code>IsValue = true</code> and without a BrowseName.</p>
<h1><a class="anchor" id="L3ClientSdkModelManagerStep2"></a>
Step 2) Perform Operations with the Model</h1>
<div class="fragment"><div class="line">BoilerModel boiler = <span class="keyword">new</span> BoilerModel();</div>
<div class="line"><a class="code" href="namespaceUnifiedAutomation_1_1UaBase.html#a5c65b5d5d05c3f82bdeef88928d74328a4b5bd8a54893c87287a22228b5ef2bc8">NodeId</a> boilerId = <a class="code" href="namespaceUnifiedAutomation.html">UnifiedAutomation</a>.Demo.Model.ObjectIds.Demo_BoilerDemo_Boiler1.ToNodeId(Session.NamespaceUris);</div>
<div class="line">ModelHandle modelHandle = Session.Model.Read(boilerId, boiler);</div>
</div><!-- fragment --><p>The code above reads the values for all of the mapped nodes and updates the Model object. When the operation has finished, the values can be accessed by accessing the mapped properties of the Model object as shown.</p>
<p>If errors occur, they are reported in the <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1ModelHandle.html#a18176ad495251f527d4ab1def1859892">ModelHandle.LastResults</a> property of the returned ModelHandle from the call. Each element corresponds to an element of the <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1ModelHandle.html#a2bb8245573260626a2ab1272e9c213ab">ModelHandle.Mappings</a> property. If an error occurs during a Read, the corresponding property in the Model object is set to its default value.</p>
<p>If the Model is subscribed to, all or part of the Model object is updated whenever an update from the Server arrives. Thread synchronization is taken care by locking the synchronization object provided in the Subscribe request before applying any updates to the Model object. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="L1ClientSdkOverview.html">Client SDK Overview</a></li>
    <li class="footer">&copy; Unified Automation GmbH - All rights reserved.</li>
  </ul>
</div>
</body>
</html>
