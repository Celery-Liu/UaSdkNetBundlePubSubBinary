<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>.NET Based OPC UA Client/Server/PubSub SDK: Subscription</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header_inner_inner_bg2.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">.NET Based OPC UA Client/Server/PubSub SDK
   &#160;<span id="projectnumber">4.1.0.556</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('L2ClientSdkSubscription.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Subscription </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#L3ClientSdkSubscriptionOverview">Overview</a></li>
<li class="level1"><a href="#L3ClientSdkSubscriptionReconnectModel">Reconnect Model</a></li>
</ul>
</div>
<div class="textblock"><p>API documentation <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html" title="A class that manages a subscription with an OPC UA server. ">UnifiedAutomation.UaClient.Subscription</a> </p>
<h1><a class="anchor" id="L3ClientSdkSubscriptionOverview"></a>
Overview</h1>
<p>The <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html">Subscription</a> class represents a single Subscription on a Server. The Subscription maintains a local copy of the parameters and all MonitoredItems. These local copies can be altered by updating their properties without affecting the state on the Server. Actually affecting the state of the Server requires that one of the service methods be called.</p>
<p>The <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html">Subscription</a> follows the same design pattern as the <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Session.html">Session</a> object where synchronous and asynchronous versions of each service call are defined. The <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1RequestSettings.html">RequestSettings</a> is a parameter in each, and a single method call will be broken into multiple service requests if there are too many operations passed to the method.</p>
<p>The services supported by the <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html">Subscription</a> object are shown in the following table:</p>
<table class="doxtable">
<tr>
<th>Service Name </th><th>Description  </th></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#ac5822c897c761f4fdeb02464885e9d77">Create</a> </td><td>Creates a new Subscription on the Server.<br />
 Adds any MonitoredItems which are already part of the Subscription. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#adf4d5d40ae1e3259685624f274db7e2b">Modify</a> </td><td>Modifies the parameters of an existing Subscription. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#af35625954fedb03d592a5ceb9f31a618">Delete</a> </td><td>Deletes an existing Subscription. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#ad0a44946e0c74433834db197f654b434">Transfer</a> </td><td>Transfers a Subscription on the Server to this Session.<br />
 The application is responsible for ensuring MonitoredItems stored locally match the MonitoredItems that Server knows about. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#aafd0a1b11d8b6853cbf4e91b10bbce9d">CreateMonitoredItems</a> </td><td>Creates one or more MonitoredItems. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#aa36eca4532b9618ddbb32a04dbd5d421">ModifyMonitoredItems</a> </td><td>Modifies one or more MonitoredItems. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#ad3b484720fe49114988ba0d259359697">DeleteMonitoredItems</a> </td><td>Deletes one or more MonitoredItems. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#a5154ebe09047ec0cf8647a6544fdccd2">SetMonitoringMode</a> </td><td>Changes the monitoring mode for one or more MonitoredItems. </td></tr>
<tr>
<td><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#aa4e76b60a1f33fc14518c2138ad31a85">Republish</a> </td><td>Requests that a notification message be resent by the Server. </td></tr>
</table>
<p>The state of a <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html">Subscription</a> can be saved or restored from a stream using the <a class="el" href="interfaceUnifiedAutomation_1_1UaBase_1_1IEncoder.html">IEncoder</a> and <a class="el" href="interfaceUnifiedAutomation_1_1UaBase_1_1IDecoder.html">IDecoder</a> interfaces. These allow Application Developers to choose a data format that suits their needs. Standard implementations for UA Binary and XML encodings are part of the SDK.</p>
<p>A <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html">Subscription</a> object is thread-safe.</p>
<h1><a class="anchor" id="L3ClientSdkSubscriptionReconnectModel"></a>
Reconnect Model</h1>
<p>When a Session reconnects after an error, it has to recover its Subscriptions as well. The process used when recovering the Subscriptions is shown in the following diagram:</p>
<div class="image">
<img src="l3clientsdksubscriptionreconnectmodel.png" alt="l3clientsdksubscriptionreconnectmodel.png"/>
</div>
<p>The TransferSubscription starts when the Session recovers a broken connection to the Server by creating a new Session. This action attempts to transfer the Subscription to the re-created Session. This will fail if too much time has passed and the Server has already cleaned up the Subscription.</p>
<p>The Republish action starts if the TransferSubscription action succeeds. Republishing repeats until all of the available sequence numbers returned in the TransferSubscription response have been processed. The CreateSubscription action starts if the TransferSubscription action fails. It creates a new Subscription on the Server using the locally cached parameters.</p>
<p>The CreateMonitoredItems action starts after the new Subscription is created. It re-creates all of the MonitoredItems that existed when communication failed.</p>
<p>The BeginPublish action re-fills the Session publish queue by sending a Publish request. At this point recovery is complete and the application will receive updates from the Server. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="L1ClientSdkOverview.html">Client SDK Overview</a></li>
    <li class="footer">&copy; Unified Automation GmbH - All rights reserved.</li>
  </ul>
</div>
</body>
</html>
