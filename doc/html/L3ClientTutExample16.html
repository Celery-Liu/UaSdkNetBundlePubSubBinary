<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>.NET Based OPC UA Client/Server/PubSub SDK: Manage Subscription – Create Subscription</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header_inner_inner_bg2.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">.NET Based OPC UA Client/Server/PubSub SDK
   &#160;<span id="projectnumber">4.1.0.556</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('L3ClientTutExample16.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Manage Subscription – Create Subscription </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#L4ClientTutExample16Pre">Prerequisites</a></li>
<li class="level1"><a href="#L4ClientTutExample16Desc">Description</a></li>
<li class="level1"><a href="#L4ClientTutExample16Code">Sample Code</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="L4ClientTutExample16Pre"></a>
Prerequisites</h1>
<p>A session with the server must be established.</p>
<h1><a class="anchor" id="L4ClientTutExample16Desc"></a>
Description</h1>
<p>The following dialog shows an example dialog to create a subscription. Press the button “Show Code” to display the corresponding code, and the button “Help” to show this documentation page.</p>
<div class="image">
<img src="clienttutorials_create_subscription2.png" alt="clienttutorials_create_subscription2.png"/>
</div>
<p>Enter the desired subscription parameters into the input field column at “Requested Parameters” and press the button “Create”. A new subscription will be created and the subscription parameters set by the server are displayed at “Revised Parameters”. Check the box in front of “Use Asynchronous Pattern” to call “BeginCreate” instead of “Create”.</p>
<h1><a class="anchor" id="L4ClientTutExample16Code"></a>
Sample Code</h1>
<p>The following code creates a new subscription using the requested subcription parameters and displays the revised parameters in the user interface.</p>
<p>After creating the <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html">Subscription</a> the following properties are updated with values from the gui:</p>
<ul>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#a3212a2bd064f54354cd1c45ce85f4e0a">PublishingInterval</a></li>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#a101d3ffaf8376c81cd9ce5e2af234251">MaxKeepAliveTime</a></li>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#a7fb61662e7f7d546d617e8cacfb83fb6">Lifetime</a></li>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#aaee49369a94cef07d49654f3b47ad13b">MaxNotificationsPerPublish</a></li>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#a57e52d561902672e3f58271fe85f3eb5">Priority</a></li>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#a828e830e74954e006f634e3f46e9b2fb">PublishingEnabled</a></li>
</ul>
<p>These are the settings that are requested by the client.</p>
<p>When calling <a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#ac5822c897c761f4fdeb02464885e9d77">Subscription.Create</a> the subscription is created on the server.</p>
<p>The Subscription settings that are reviced by the server are stored in the properties</p>
<ul>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#ab58d766f7a38c42713c7758b61959e43">CurrentPublishingInterval</a></li>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#a5b18d44b88e85e7bf1a7878842d2a812">CurrentMaxKeepAliveTime</a></li>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#affa8421e2aed793ee7e8aeae96859d9b">CurrentLifetime</a></li>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#a063b6c467f657e7cab7b43cdd5f8f73b">CurrentMaxNotificationsPerPublish</a></li>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#ac8db17e32454201c2ea470948cd381e4">CurrentPriority</a></li>
<li><a class="el" href="classUnifiedAutomation_1_1UaClient_1_1Subscription.html#a8edc8e173d10a6125cd5529f06f372d7">CurrentPublishingEnabled</a></li>
</ul>
<div class="fragment"><div class="line">                <span class="comment">// initialize subscription.</span></div>
<div class="line">                m_subscription = <span class="keyword">new</span> Subscription(session);</div>
<div class="line"></div>
<div class="line">                m_subscription.PublishingInterval = (double)PublishingIntervalUD.Value;</div>
<div class="line">                m_subscription.MaxKeepAliveTime = (<span class="keywordtype">double</span>)KeepAliveTimeUD.Value;</div>
<div class="line">                m_subscription.Lifetime = (double)LifeTimeUD.Value;</div>
<div class="line">                m_subscription.MaxNotificationsPerPublish = (uint)MaxNotificationsUD.Value;</div>
<div class="line">                m_subscription.Priority = (byte)PriorityUD.Value;</div>
<div class="line">                m_subscription.PublishingEnabled = PublishingEnabledCK.Checked;</div>
<div class="line"></div>
<div class="line">                <span class="comment">// create subscription.</span></div>
<div class="line">                m_subscription.Create(<span class="keyword">new</span> RequestSettings() { OperationTimeout = 10000 });</div>
<div class="line"></div>
<div class="line">                <span class="comment">// update controls.</span></div>
<div class="line">                CurrentPublishingIntervalTB.Text = m_subscription.CurrentPublishingInterval.ToString();</div>
<div class="line">                CurrentKeepAliveTimeTB.Text = m_subscription.CurrentMaxKeepAliveTime.ToString();</div>
<div class="line">                CurrentLifeTimeTB.Text = m_subscription.CurrentLifetime.ToString();</div>
<div class="line">                CurrentMaxNotificationsTB.Text = m_subscription.CurrentMaxNotificationsPerPublish.ToString();</div>
<div class="line">                CurrentPriorityTB.Text = m_subscription.CurrentPriority.ToString();</div>
<div class="line">                CurrentPublishingEnabledCK.Checked = m_subscription.CurrentPublishingEnabled;</div>
</div><!-- fragment --></div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="L1ClientTutorials.html">Tutorials for Client development</a></li><li class="navelem"><a class="el" href="L2ClientTutExamples.html">Getting Started</a></li>
    <li class="footer">&copy; Unified Automation GmbH - All rights reserved.</li>
  </ul>
</div>
</body>
</html>
