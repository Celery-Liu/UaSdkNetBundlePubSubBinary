<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>.NET Based OPC UA Client/Server/PubSub SDK: Installation Process</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header_inner_inner_bg2.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">.NET Based OPC UA Client/Server/PubSub SDK
   &#160;<span id="projectnumber">4.1.0.556</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('L2BaseLibInstallProcess.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Installation Process </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#L3BaseLibInstallProcessOverview">Overview</a></li>
<li class="level1"><a href="#L3BaseLibInstallProcessInstall">Install</a></li>
<li class="level1"><a href="#L3BaseLibInstallProcessUninstall">Uninstall</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="L3BaseLibInstallProcessOverview"></a>
Overview</h1>
<p>OPC UA Applications that are managed by <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1ApplicationInstance.html">ApplicationInstance</a> are parsing the command line arguments by default. Here the usage of the arguments dealing with the installation process are described.</p>
<p>The <code>/install</code> argument makes changes to the machine configuration in order to allow an application built with the SDK to run. It is used rarely by an administrator and can be used with an installer custom build step. It is intended to leave the application in a state that is <em>ready to use</em> with security enabled.</p>
<p>The <code>/uninstall</code> argument undoes the machine configuration changes made by the <code>/install</code> argument. The uninstall process will not delete files created by the application or during install.</p>
<p>If the <code>/silent</code> option is used as well the install process will always succeed and any errors are placed in the application log file - if enabled(!). If it is not used an error will cause an exception and the process halts.</p>
<h1><a class="anchor" id="L3BaseLibInstallProcessInstall"></a>
Install</h1>
<p>The install process starts if the <code>/install</code> command is processed. At this point the configuration has already been loaded by the <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1ApplicationInstance.html#a5a1dff7551b226c36e16a78d6194b804">Start</a> method. The install activity is shown in the following diagram:</p>
<div class="image">
<img src="l3baselibinstallprocessinstall.png" alt="l3baselibinstallprocessinstall.png"/>
</div>
<p>The configuration file should have an <code>InstallationSettings</code> element as defined above. If not suitable defaults are used.</p>
<p>The <code>PreInstallProcessing</code> action allows the Application Developer to customize the install process by adding additional steps before the default installation process starts.</p>
<p>The <code>CheckConfiguration</code> action validates the configuration and sets values to suitable defaults. It is the same as the action described in the method <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1ApplicationInstance.html#a5a1dff7551b226c36e16a78d6194b804">Start</a>. The <code>AutoCreateCertificate</code> flag is always set to <code>TRUE</code> before this action is executed.</p>
<p>The <code>RegisterWithLDS</code> action loads the LDS configuration file, determines where its trust list is located and adds the application's certificate to that trust list. This step is performed only if endpoints are defined for the application.</p>
<p>The <code>ConfigureFirewall</code> action calls the virtual <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1ApplicationInstance.html#a9d4abe509c0a6e3745ecd0a2caed8549">OpenFirewallPorts</a> method in ApplicationInstance class. Implement this method to set your Firewall configuration.</p>
<p>The <code>ConfigureService</code> action registers the application as a Windows-Service. Any existing service registration is deleted.</p>
<p>The <code>SetFilePermissions</code> action allows the application developer to set custom file permission during the install process. It calls the virtual <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1ApplicationInstance.html#a15ac2d430855f409c5a1a7adc7d8ffed">SetFilePermissions</a> method in ApplicationInstance class. Implement this method to set your file permissions.</p>
<p>Write permissions for the following files are useful:</p>
<ol type="1">
<li>The application certificate private key;</li>
<li>The application configuration files;</li>
<li>The application executable file;</li>
<li>The trusted certificate list and issuers list;</li>
<li>The rejected certificate list;</li>
<li>The application trace log file directory;</li>
</ol>
<p>The <code>PostInstallProcessing</code> action allows the application developer to customize the install process by adding additional steps after the default installation process completes.</p>
<h1><a class="anchor" id="L3BaseLibInstallProcessUninstall"></a>
Uninstall</h1>
<p>The uninstall process starts if the <code>/uninstall</code> command is processed. At this point the configuration has already been loaded by the <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1ApplicationInstance.html#a5a1dff7551b226c36e16a78d6194b804">Start</a> method. The uninstall activity is shown in the following diagram:</p>
<div class="image">
<img src="l3baselibinstallprocessuninstall.png" alt="l3baselibinstallprocessuninstall.png"/>
</div>
<p>The configuration file should have an <code>InstallationSettings</code> element as defined above. If not suitable defaults are used.</p>
<p>The <code>PreInstallProcessing</code> action allows the application developer to customize the uninstall process.</p>
<p>The <code>CheckConfiguration</code> action validates the configuration and sets values to suitable defaults. It is the same as the action described in the method <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1ApplicationInstance.html#a5a1dff7551b226c36e16a78d6194b804">Start</a>.</p>
<p>The <code>UninstallService</code> action stops and unregisters the service.</p>
<p>The <code>ConfigureFirewall</code> action calls the virtual <a class="el" href="classUnifiedAutomation_1_1UaBase_1_1ApplicationInstance.html#a952eb703dfc45676ec13f54dbdbca133">CloseFirewallPorts</a> method in ApplicationInstance class. Implement this mehtods to reset your Firewall configuration.</p>
<p>The <code>DeleteCertificate</code> action removes the application certificate from all trust lists and deletes the private key. The private key is not deleted if the <code>DeleteCertificateOnUninstall</code> property is <code>FALSE</code>.</p>
<p>The <code>PostInstallProcessing</code> action allows the application developer to customize the uninstall process. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="L1BaseLibOverview.html">Base Library Overview</a></li>
    <li class="footer">&copy; Unified Automation GmbH - All rights reserved.</li>
  </ul>
</div>
</body>
</html>
